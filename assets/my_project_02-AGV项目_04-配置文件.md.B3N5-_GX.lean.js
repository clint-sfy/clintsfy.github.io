import{_ as k}from"./chunks/ArticleMetadata.Lj5xScwM.js";import{_ as e,C as r,c as d,o as p,k as l,G as g,P as o,a as A,w as C,b as c,e as y}from"./chunks/framework.CLT-Xekf.js";import"./chunks/md5.Dgu2YaMo.js";const f=JSON.parse('{"title":"配置文件合集","description":"","frontmatter":{"title":"配置文件合集","author":"阿源","date":"2023/11/22 12:00","categories":["个人项目"],"tags":["个人项目","ROS"]},"headers":[],"relativePath":"my_project/02-AGV项目/04-配置文件.md","filePath":"my_project/02-AGV项目/04-配置文件.md","lastUpdated":1713341239000}'),_={name:"my_project/02-AGV项目/04-配置文件.md"};function D(i,s,F,u,B,m){const t=k,h=r("ClientOnly");return p(),d("div",null,[s[0]||(s[0]=l("h1",{id:"配置文件合集",tabindex:"-1"},[A("配置文件合集 "),l("a",{class:"header-anchor",href:"#配置文件合集","aria-label":'Permalink to "配置文件合集"'},"​")],-1)),g(h,null,{default:C(()=>{var a,n;return[(((a=i.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=i.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(p(),c(t,{key:0,article:i.$frontmatter},null,8,["article"])):y("",!0)]}),_:1}),s[1]||(s[1]=o(`<h2 id="cartographer配置" tabindex="-1">cartographer配置 <a class="header-anchor" href="#cartographer配置" aria-label="Permalink to &quot;cartographer配置&quot;">​</a></h2><p>a) 在只使用激光雷达的时候(tracking_frame=&quot;laser,publish_frame=&quot;laser&quot;)</p><p>b) 使用里程计+激光雷达时(tracking_frame=&quot;base_link&quot;, publish_frame=&quot;odom&quot;)</p><p>c) 使用IMU+激光+里程计时(tracking_frame=&quot;imu_link&quot;, publish_frame=&quot;odom&quot;)</p><h3 id="_2d激光小车" tabindex="-1">2D激光小车 <a class="header-anchor" href="#_2d激光小车" aria-label="Permalink to &quot;2D激光小车&quot;">​</a></h3><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;map_builder.lua&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">include</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;trajectory_builder.lua&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  map_builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> MAP_BUILDER,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- map_builder.lua的配置信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  trajectory_builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> TRAJECTORY_BUILDER,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- trajectory_builder.lua的配置信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  map_frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;map&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                        </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 地图坐标系的名字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  --tracking_frame 有 imu 的 link 就设置成 imu 的 link, 没有就设置成 base_link</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  tracking_frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;base_footprint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 将所有传感器数据转换到这个坐标系下</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  -- 发布的 tf 的最下边一个坐标系, 就是 bag 文件中 tf树的最上边的一个坐标系</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  published_frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;base_footprint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- tf: map -&gt; footprint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  odom_frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;odom_combined&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,             </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 里程计的坐标系名字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  provide_odom_frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否提供odom的tf, 如果为true,则tf树为map-&gt;odom-&gt;footprint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                                            -- 如果为false tf树为map-&gt;footprint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  publish_frame_projected_to_2d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否将坐标系投影到平面上</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  --use_pose_extrapolator = false,            -- 发布tf时是使用pose_extrapolator的位姿还是前端计算出来的位姿</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  use_odometry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                     </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否使用里程计,如果使用要求一定要有odom的tf</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  use_nav_sat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否使用gps</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  use_landmarks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否使用landmark</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  num_laser_scans </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否使用单线激光数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  num_multi_echo_laser_scans </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否使用multi_echo_laser_scans数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  num_subdivisions_per_laser_scan </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 1帧数据被分成几次处理,一般为1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  num_point_clouds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,                     </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 是否使用点云数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  lookup_transform_timeout_sec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 查找tf时的超时时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  submap_publish_period_sec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 发布数据的时间间隔</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  pose_publish_period_sec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5e-3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  trajectory_publish_period_sec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 30e-3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  rangefinder_sampling_ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 传感器数据的采样频率</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  odometry_sampling_ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  fixed_frame_pose_sampling_ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  imu_sampling_ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  landmarks_sampling_ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">MAP_BUILDER.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">use_trajectory_builder_2d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">use_imu_data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> false</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">   -- 设置IMU数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">min_range</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">   --雷达的最大最小距离，根据雷达硬件设定</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">max_range</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 18.</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  --雷达的最大最小距离，根据雷达硬件设定</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- TRAJECTORY_BUILDER_2D.min_z = 0.2  --使用多点高以上的点云，单线的时候不要设置，多线防止打到地面上的点干扰建图</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.max_z = 1.4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.voxel_filter_size = 0.02</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.adaptive_voxel_filter.max_length = 0.5</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.adaptive_voxel_filter.min_num_points = 200.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.adaptive_voxel_filter.max_range = 50.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.loop_closure_adaptive_voxel_filter.max_length = 0.9</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.loop_closure_adaptive_voxel_filter.min_num_points = 100</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.loop_closure_adaptive_voxel_filter.max_range = 50.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 这个参数用于指定在传感器数据中缺失时，算法应该考虑的最大距离</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">missing_data_ray_length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 通过在传感器数据中搜索相关的特征来进行实时的定位和地图构建  仿真的时候不用开</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">use_online_correlative_scan_matching</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 指定在线实时相关扫描匹配器的线性搜索窗口大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">real_time_correlative_scan_matcher</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">linear_search_window</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 指定在线实时相关扫描匹配器中平移变化成本的权重</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">real_time_correlative_scan_matcher</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">translation_delta_cost_weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 指定在线实时相关扫描匹配器中旋转变化成本的权重</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">real_time_correlative_scan_matcher</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">rotation_delta_cost_weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1e-1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--ceres地图的扫描，平移，旋转的权重，影响建图效果，其他基本上是影响计算量等</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--扫描匹配点云和地图匹配程度，值越大，点云和地图匹配置信度越高</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">ceres_scan_matcher</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">occupied_space_weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--残差平移、旋转分量，值越大，越不相信和地图匹配的效果，而是越相信先验位姿的结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">ceres_scan_matcher</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">translation_weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--如果imu不好，接入后地图旋转厉害，可以将这里的旋转权重减小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">ceres_scan_matcher</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">rotation_weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.ceres_scan_matcher.ceres_solver_options.max_num_iterations = 12</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.motion_filter.max_distance_meters = 0.1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.motion_filter.max_angle_radians = 0.004</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--TRAJECTORY_BUILDER_2D.imu_gravity_time_constant = 1.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">submaps</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">num_range_data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 35.</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  --一个子图插入多少个节点，根据laser和运动速度进行具体的调整</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">TRAJECTORY_BUILDER_2D.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">submaps</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">grid_options_2d</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">resolution</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">POSE_GRAPH.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">optimize_every_n_nodes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 70.</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">   -- 2倍的num_range_data以上</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">POSE_GRAPH.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">constraint_builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">sampling_ratio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.3</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">   -- 如果添加的约束与潜在约束的比例低于此比例,则将添加约束</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">POSE_GRAPH.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">constraint_builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">max_constraint_distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 15.</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> -- 在子图附近考虑姿势的阈值,大于这个值将被略过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">POSE_GRAPH.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">optimization_problem</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">huber_scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1e2</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> -- 用于指定Huber损失函数中的尺度参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">-- 回环检测阈值，如果不稳定有错误匹配，可以提高这两个值，场景重复可以降低或者关闭回环</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">POSE_GRAPH.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">constraint_builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">min_score</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.65</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">POSE_GRAPH.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">constraint_builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">global_localization_min_score</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.60</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> options</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>&lt;!--</span></span>
<span class="line"><span>  Copyright 2016 The Cartographer Authors</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span>
<span class="line"><span>  you may not use this file except in compliance with the License.</span></span>
<span class="line"><span>  You may obtain a copy of the License at</span></span>
<span class="line"><span></span></span>
<span class="line"><span>       http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  Unless required by applicable law or agreed to in writing, software</span></span>
<span class="line"><span>  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span>
<span class="line"><span>  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span>
<span class="line"><span>  See the License for the specific language governing permissions and</span></span>
<span class="line"><span>  limitations under the License.</span></span>
<span class="line"><span>--&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;launch&gt;</span></span>
<span class="line"><span>  &lt;!-- bag的地址与名称 --&gt;</span></span>
<span class="line"><span>  &lt;arg name=&quot;bag_filename&quot; default=&quot;$(env HOME)/bagfiles/rslidar-outdoor-gps-notf.bag&quot;/&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;!-- 使用bag的时间戳 --&gt;</span></span>
<span class="line"><span>  &lt;param name=&quot;/use_sim_time&quot; value=&quot;true&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;!-- 启动cartographer --&gt;</span></span>
<span class="line"><span>  &lt;node name=&quot;cartographer_node&quot; pkg=&quot;cartographer_ros&quot;</span></span>
<span class="line"><span>      type=&quot;cartographer_node&quot; args=&quot;</span></span>
<span class="line"><span>          -configuration_directory $(find cartographer_ros)/configuration_files</span></span>
<span class="line"><span>          -configuration_basename lx_rs16_2d_outdoor.lua&quot;</span></span>
<span class="line"><span>      output=&quot;screen&quot;&gt;</span></span>
<span class="line"><span>    &lt;remap from=&quot;points2&quot; to=&quot;rslidar_points&quot; /&gt;</span></span>
<span class="line"><span>    &lt;remap from=&quot;scan&quot; to=&quot;front_scan&quot; /&gt;</span></span>
<span class="line"><span>    &lt;remap from=&quot;odom&quot; to=&quot;odom_scout&quot; /&gt;</span></span>
<span class="line"><span>    &lt;remap from=&quot;imu&quot; to=&quot;imu&quot; /&gt;</span></span>
<span class="line"><span>  &lt;/node&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;!-- 生成ros格式的地图 --&gt;</span></span>
<span class="line"><span>  &lt;node name=&quot;cartographer_occupancy_grid_node&quot; pkg=&quot;cartographer_ros&quot;</span></span>
<span class="line"><span>      type=&quot;cartographer_occupancy_grid_node&quot; args=&quot;-resolution 0.05&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;!-- 启动rviz --&gt;</span></span>
<span class="line"><span>  &lt;node name=&quot;rviz&quot; pkg=&quot;rviz&quot; type=&quot;rviz&quot; required=&quot;true&quot;</span></span>
<span class="line"><span>      args=&quot;-d $(find cartographer_ros)/configuration_files/lx_2d.rviz&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  &lt;!-- 启动rosbag --&gt;</span></span>
<span class="line"><span>  &lt;node name=&quot;playbag&quot; pkg=&quot;rosbag&quot; type=&quot;play&quot;</span></span>
<span class="line"><span>      args=&quot;--clock $(arg bag_filename)&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;/launch&gt;</span></span></code></pre></div>`,7))])}const b=e(_,[["render",D]]);export{f as __pageData,b as default};
