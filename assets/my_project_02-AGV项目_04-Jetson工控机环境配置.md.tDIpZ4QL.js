import{_ as p}from"./chunks/ArticleMetadata.Xa7L4Afm.js";import{_ as e,D as k,o as n,c as d,I as F,w as r,k as h,a as g,R as o,b as c,e as y}from"./chunks/framework.Dn7lIAzt.js";import"./chunks/md5.vgHT5zCM.js";const P=JSON.parse('{"title":"Jetson工控机环境配置","description":"","frontmatter":{"title":"Jetson工控机环境配置","author":"阿源","date":"2024/4/22 12:00","categories":["个人项目"],"tags":["个人项目","ROS"]},"headers":[],"relativePath":"my_project/02-AGV项目/04-Jetson工控机环境配置.md","filePath":"my_project/02-AGV项目/04-Jetson工控机环境配置.md","lastUpdated":1750682438000}'),D={name:"my_project/02-AGV项目/04-Jetson工控机环境配置.md"},C=h("h1",{id:"jetson工控机环境配置",tabindex:"-1"},[g("Jetson工控机环境配置 "),h("a",{class:"header-anchor",href:"#jetson工控机环境配置","aria-label":'Permalink to "Jetson工控机环境配置"'},"​")],-1),u=o(`<p>本人使用的Jetson版本为Jetson TX2NX 操作系统ubuntu18</p><p>jetson分辨率问题</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">xrandr</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --fb</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1920</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">x1080</span></span></code></pre></div><h2 id="_1-初始化" tabindex="-1">1. 初始化 <a class="header-anchor" href="#_1-初始化" aria-label="Permalink to &quot;1. 初始化&quot;">​</a></h2><h3 id="_1-1-烧录jetpack" tabindex="-1">1.1 烧录Jetpack <a class="header-anchor" href="#_1-1-烧录jetpack" aria-label="Permalink to &quot;1.1 烧录Jetpack&quot;">​</a></h3><p>版本选择 Jetpack4.6 Opencv4.5.3 Python3.6.9</p><h3 id="_1-2-增加内存" tabindex="-1">1.2 增加内存 <a class="header-anchor" href="#_1-2-增加内存" aria-label="Permalink to &quot;1.2 增加内存&quot;">​</a></h3><h3 id="_1-3-增加-swap空间" tabindex="-1">1.3 增加 swap空间 <a class="header-anchor" href="#_1-3-增加-swap空间" aria-label="Permalink to &quot;1.3 增加 swap空间&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#新增swapfile文件大小自定义</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fallocate</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">G</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/swapfile</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#配置该文件的权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 600</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/swapfile</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#建立交换分区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mkswap</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/swapfile</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#启用交换分区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> swapon</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bash</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;echo &quot;/var/swapfile swap swap defaults 0 0&quot; &gt;&gt; /etc/fstab&#39;</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 删除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/fstab</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#/var/swapfile swap swap defaults 0 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reboot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/swapfile</span></span></code></pre></div><h3 id="_1-4-开启战斗模式" tabindex="-1">1.4 开启战斗模式 <a class="header-anchor" href="#_1-4-开启战斗模式" aria-label="Permalink to &quot;1.4 开启战斗模式&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> nvpmodel</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span></span></code></pre></div><p><a href="https://forums.developer.nvidia.com/t/two-cores-disabled/48637/19" target="_blank" rel="noreferrer">https://forums.developer.nvidia.com/t/two-cores-disabled/48637/19</a></p><p>TX2 最大性能模式两个内核不工作</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 可以解决，只是我的情况是使用ssd扩展的，导致需要修改两个文件：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;extlinux.conf&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#我的显示</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#/boot/extlinux/extlinux.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#/media/tx2nx/02742802-5576-479c-8dec-5bec58ed6925/boot/extlinux/extlinux.conf</span></span></code></pre></div><p>两个文件都要修改，isolcpus=不存在的[cpu]</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">isolcpus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#或者</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">isolcpus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span></span></code></pre></div><h3 id="_1-5-禁用内核更新" tabindex="-1">1.5 禁用内核更新 <a class="header-anchor" href="#_1-5-禁用内核更新" aria-label="Permalink to &quot;1.5 禁用内核更新&quot;">​</a></h3><p>之前和大佬学习AI的时候，apt update把板子内核更了，很多之前烧的东西因为版本适配问题用不了，无奈自己水平太菜只能SDK manager 重新烧，后面大佬说了一下禁更内核的方法，是以为记录。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ./etc/apt/sources.list.d</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> nvidia-l4t-apt-source.list</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  mynvidia.list</span></span></code></pre></div><p>小伙伴们接下来就可以愉快的</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> upgrade</span></span></code></pre></div><h2 id="_2-基础安装" tabindex="-1">2. 基础安装 <a class="header-anchor" href="#_2-基础安装" aria-label="Permalink to &quot;2. 基础安装&quot;">​</a></h2><h3 id="_2-1-输入法安装" tabindex="-1">2.1 输入法安装 <a class="header-anchor" href="#_2-1-输入法安装" aria-label="Permalink to &quot;2.1 输入法安装&quot;">​</a></h3><p>arm只支持googlepinyin，不支持sunpingyin</p><div class="language-SH vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SH</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fcitx-googlepinyin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  net-tools</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  openssh-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  terminator</span></span></code></pre></div><p>[Ubuntu安装Fcitx以及Fcitx输入中文不显示候选词框的解决办法]</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> fcitx-module-kimpanel</span></span></code></pre></div><h3 id="_2-2-jtop" tabindex="-1">2.2 jtop <a class="header-anchor" href="#_2-2-jtop" aria-label="Permalink to &quot;2.2 jtop&quot;">​</a></h3><p>jtop可以查看开发板的cpu，gpu以及内存和系统版本号，是一个很好用的工具相当于x86系统下的nvidia-msi，在这里下载主要是为了查看opencv的版本以及CUDA状态。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python3-pip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -H</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pip3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> jetson-stats</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> jetson_stats.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reboot</span></span></code></pre></div><h3 id="_2-3-opencv" tabindex="-1">2.3 opencv <a class="header-anchor" href="#_2-3-opencv" aria-label="Permalink to &quot;2.3 opencv&quot;">​</a></h3><p>卸载旧版本opencv</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> purge</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libopencv</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> autoremove</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span></code></pre></div><p>安装依赖库</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build-essential</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pkg-config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yasm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gfortran</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgstreamer1.0-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgstreamer-plugins-base1.0-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libjpeg8-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libjasper-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libpng12-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libtiff5-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libavcodec-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libavformat-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libswscale-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libdc1394-22-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libxine2-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libv4l-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgstreamer1.0-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgstreamer-plugins-base1.0-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgtk2.0-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libtbb-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libatlas-base-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libfaac-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libmp3lame-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libtheora-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libvorbis-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libxvidcore-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libopencore-amrnb-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libopencore-amrwb-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> x264</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v4l-utils</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python-numpy</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libtbb2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libtbb-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libjpeg-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libpng-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libtiff-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libjasper-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libdc1394-22-dev</span></span></code></pre></div><p>获取opencv 和 opencv_contrib源码并编译</p><p>地址1：<a href="https://github.com/opencv/opencv/" target="_blank" rel="noreferrer">https://github.com/opencv/opencv/</a></p><p>地址2：<a href="https://github.com/opencv/opencv_contrib/" target="_blank" rel="noreferrer">https://github.com/opencv/opencv_contrib/</a></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> opencv-4.5.3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cmake</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DCMAKE_BUILD_TYPE=Release </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DCMAKE_INSTALL_PREFIX=/usr/local </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DOPENCV_ENABLE_NONFREE=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DBUILD_opencv_python2=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DBUILD_opencv_python3=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DWITH_FFMPEG=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DCUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DCUDA_ARCH_BIN=6.2 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DCUDA_ARCH_PTX=6.2 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DWITH_CUDA=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DWITH_CUDNN=ON </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DENABLE_FAST_MATH=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DCUDA_FAST_MATH=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DWITH_CUBLAS=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DOPENCV_GENERATE_PKGCONFIG=1 </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-DOPENCV_EXTRA_MODULES_PATH=../opencv_contrib-4.5.3/modules </span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">..</span></span></code></pre></div><p>注意DOPENCV_EXTRA_MODULES_PATH需要改成自己的路径，DCUDA_ARCH_BIN以及DCUDA_ARCH_PTX后面的数字如果是其他的tx2开发板需要改成对应的数字,在jtop面板中的INFO面板可以查看，6.2表示jetson tx2</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> make</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -j6(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">六核编译</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">python3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cv2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cv2.__version__</span></span></code></pre></div><h3 id="_2-4-ros" tabindex="-1">2.4 Ros <a class="header-anchor" href="#_2-4-ros" aria-label="Permalink to &quot;2.4 Ros&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;echo &quot;deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> adv</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --keyserver</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;hkp://keyserver.ubuntu.com:80&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --recv-key</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-desktop-full</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;source /opt/ros/melodic/setup.bash&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.bashrc</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python-rosdep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python-rosinstall</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python-rosinstall-generator</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python-wstool</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build-essential</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rosdep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> init</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">rosdep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">rosdep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --from-paths</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> src</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --ignore-src</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --rosdistro=melodic</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 这一步会有一些包没有下载完需要反复根据提示下载 知道sucessful</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 注意！如果提示是std_msgs  那么为ros-melodic-std-msgs </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-提示的东西</span></span></code></pre></div><h4 id="小问题" tabindex="-1">小问题 <a class="header-anchor" href="#小问题" aria-label="Permalink to &quot;小问题&quot;">​</a></h4><ul><li><p><strong>问题2:</strong>[Err] [REST.cc:205] Error in REST request</p><p><strong>解决:</strong><code>sudo gedit ~/.ignition/fuel/config.yaml</code></p><p>然后将<code>url : https://api.ignitionfuel.org</code>使用 # 注释</p><p>再添加<code>url: https://api.ignitionrobotics.org</code></p></li><li><p>**问题3:**启动时抛出异常:<code>[gazebo-2] process has died [pid xxx, exit code 255, cmd.....</code></p><p><strong>解决:</strong><code>killall gzserver</code>和<code>killall gzclient</code></p></li></ul><h4 id="_2-4-1-cv-brige替换" tabindex="-1">2.4.1 cv_brige替换 <a class="header-anchor" href="#_2-4-1-cv-brige替换" aria-label="Permalink to &quot;2.4.1 cv_brige替换&quot;">​</a></h4><p><a href="https://github.com/ros-perception/vision_opencv/issues/345" target="_blank" rel="noreferrer">https://github.com/ros-perception/vision_opencv/issues/345</a> Project &#39;image_geometry&#39; specifies &#39;/usr/include/opencv&#39; as an include dir</p><h4 id="_2-4-2-gazebo升级" tabindex="-1">2.4.2 gazebo升级 <a class="header-anchor" href="#_2-4-2-gazebo升级" aria-label="Permalink to &quot;2.4.2 gazebo升级&quot;">​</a></h4><p>古月居教程：<a href="https://www.guyuehome.com/34875" target="_blank" rel="noreferrer">https://www.guyuehome.com/34875</a></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9-common</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9-plugin-base</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo9:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo9-dev:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-gazebo-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> purge</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9-common</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9-plugin-base</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo9:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo9-dev:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-gazebo-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;echo &quot;deb http://packages.osrfoundation.org/gazebo/ubuntu-stable \`lsb_release -cs\` main&quot; &gt; /etc/apt/sources.list.d/gazebo-stable.list&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://packages.osrfoundation.org/gazebo.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo11-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-gazebo11-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11-common</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11-plugin-base</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo11:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo11-dev:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-gazebo-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> purge</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11-common</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo11-plugin-base</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo11:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo11-dev:amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-gazebo-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gazebo9</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgazebo9-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ros-melodic-gazebo9-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span></code></pre></div><h3 id="_2-5-安装conda" tabindex="-1">2.5 安装conda <a class="header-anchor" href="#_2-5-安装conda" aria-label="Permalink to &quot;2.5 安装conda&quot;">​</a></h3><p>因为jetson <a href="https://so.csdn.net/so/search?q=tx2&amp;spm=1001.2101.3001.7020" target="_blank" rel="noreferrer">tx2</a> 是aarch架构所以Anaconda在tx2上使用不了，只能使用archiconda</p><p>下载地址：<a href="https://github.com/Archiconda/build-tools/releases" target="_blank" rel="noreferrer">https://github.com/Archiconda/build-tools/releases</a></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Archiconda3-0.2.3-Linux-aarch64.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./Archiconda3-0.2.3-Linux-aarch64.sh</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gedit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">~/home/anaconda3/bin:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$PATH </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">####加在最后一行</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/.bashrc</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> base</span></span></code></pre></div><h2 id="_3-d435i相机" tabindex="-1">3. D435i相机 <a class="header-anchor" href="#_3-d435i相机" aria-label="Permalink to &quot;3. D435i相机&quot;">​</a></h2><h3 id="_3-1-相机驱动安装" tabindex="-1">3.1 相机驱动安装 <a class="header-anchor" href="#_3-1-相机驱动安装" aria-label="Permalink to &quot;3.1 相机驱动安装&quot;">​</a></h3><p><a href="https://github.com/IntelRealSense/librealsense/issues/11391" target="_blank" rel="noreferrer">https://github.com/IntelRealSense/librealsense/issues/11391</a></p><p>下载的版本一定要记住，在后续的安装中有用。如果通过命令下不下来建议直接去网页下载，也更方便选择版本，下载的是2.50.0版本，一定选择此版本</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/IntelRealSense/librealsense.git</span></span></code></pre></div><p>注意：这里的jetpack版本一定要 &lt;= 4.6，否则你的补丁打不上</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> librealsense</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./scripts/patch-realsense-ubuntu-L4T.sh</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libssl-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libusb-1.0-0-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pkg-config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgtk-3-dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -y</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./scripts/setup_udev_rules.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ..</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -DBUILD_EXAMPLES=true</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -DCMAKE_BUILD_TYPE=release</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -DFORCE_RSUSB_BACKEND=false</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -DBUILD_WITH_CUDA=true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">make</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -j</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">$(($(nproc)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">))</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">realsense-viewer</span></span></code></pre></div><p>若出现界面则说明安装成功</p><h3 id="_3-2-realsense-ros" tabindex="-1">3.2 Realsense-Ros <a class="header-anchor" href="#_3-2-realsense-ros" aria-label="Permalink to &quot;3.2 Realsense-Ros&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libudev-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pkg-config</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libgtk-3-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libusb-1.0-0-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pkg-config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libglfw3-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libssl-dev</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/catkin_ws/src</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/catkin_ws/src/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">catkin_init_workspace</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/IntelRealSense/realsense-ros.git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/pal-robotics/ddynamic_reconfigure.git</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> realsense-ros/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -V</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -P</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;^2.\\d+\\.\\d+&quot; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 请注意 这个检查的2.50的驱动，如果你安装的不对的话。。。</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ~/catkin_ws/src/realsense-ros/realsense2_camera</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gedit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> CMakeLists.txt</span></span></code></pre></div><p>是否安装成功</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> realsense2_camera</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rs_camera.launch</span></span></code></pre></div><h2 id="_4-深度学习相关" tabindex="-1">4. 深度学习相关 <a class="header-anchor" href="#_4-深度学习相关" aria-label="Permalink to &quot;4. 深度学习相关&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Confirm</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> that</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> workaround</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> survives</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> reeboot</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> adding:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;5000&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /sys/devices/c250000.i2c/i2c-7/7-0040/iio</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">device0/crit_current_limit_0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;5000&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /sys/devices/3180000.i2c/i2c-2/2-0040/iio</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">\\:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">device0/crit_current_limit_0</span></span></code></pre></div><h3 id="_4-1-yolov5环境安装pytorch" tabindex="-1">4.1 yolov5环境安装Pytorch <a class="header-anchor" href="#_4-1-yolov5环境安装pytorch" aria-label="Permalink to &quot;4.1 yolov5环境安装Pytorch&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yolov5</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python==</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3.6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.9</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yolov5</span></span></code></pre></div><p>会一直报这个错误，这是因为1：pip的版本不对建议安装pip19.1.1.但是pip和pip3是使用不了的所以选用conda安装</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pip=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">19.1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.1</span></span></code></pre></div><p>注意！numpy的版本，该版本是否支持arm架构的jetson</p><p>查询地址：<a href="https://anaconda.org/search?q=numpy" target="_blank" rel="noreferrer">https://anaconda.org/search?q=numpy</a></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> conda-forge::numpy</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> libblas-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkinstall</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> liblapack-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkinstall</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gfortran</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip3</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> scipy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 不要着急，编译半小时。。</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">SyntaxError:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> future</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> feature</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> annotations</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> defined</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">https://github.com/csuhan/ReDet/issues/14</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Try</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Pytho</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3.7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">For</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Python</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3.6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> need:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> legacy_py3.6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/QUVA-Lab/e2cnn.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> e2cnn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> setup.py</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span></span></code></pre></div><h3 id="_4-2-yolov8安装环境" tabindex="-1">4.2 yolov8安装环境 <a class="header-anchor" href="#_4-2-yolov8安装环境" aria-label="Permalink to &quot;4.2 yolov8安装环境&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yolov8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> python=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3.8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.13</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ultralytics</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> onnx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> lapx</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> gdown</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> numpy==</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1.23</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># pytorch 1.11.0 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gdown</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://drive.google.com/uc?id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">hs9HM0XJ2LouoPFghcn7ZMOs5qu5HexPXwM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># torchvision 0.12.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gdown</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://drive.google.com/uc?id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">m0d8ruUY8RvCP9eVjZw4Nc8LAwM8yuGV</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> torch-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.whl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> torchvision-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.whl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> build/dist/tensorrt-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.whl</span></span></code></pre></div><h4 id="_4-2-1-自我编译" tabindex="-1">4.2.1 自我编译 <a class="header-anchor" href="#_4-2-1-自我编译" aria-label="Permalink to &quot;4.2.1 自我编译&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">https://blog.csdn.net/m0_49586319/article/details/134362312</span></span></code></pre></div><h2 id="_5-项目" tabindex="-1">5. 项目 <a class="header-anchor" href="#_5-项目" aria-label="Permalink to &quot;5. 项目&quot;">​</a></h2><h3 id="slam" tabindex="-1">slam <a class="header-anchor" href="#slam" aria-label="Permalink to &quot;slam&quot;">​</a></h3><p>protobuf与gazebo冲突问题：<a href="https://zhuanlan.zhihu.com/p/573559407" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/573559407</a></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> https://github.com/google/protobuf.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> protobuf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">##### 2. 修改protobuf版本为v3.4.1,安装时会自动安装3.4.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tags/v3.4.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> v3.4.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 如果这一步报错“Google Mock not present.  Fetching gmock-1.7.0 from the web..../autogen.sh: 34: ./autogen.sh: curl: not found ”</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 需要安装一个依赖包 curl</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sudo apt  install curl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./autogen.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">##### 3. 修改安装路径 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># ./configure --prefix=/home/yours/local_install/google/protocbuff/ #yours是你对你计算机取的名字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#【下面不同用户名是我为了方便配环境自己加的，修改为自己的用户名运行一个即可】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --prefix=/home/ros/software/local_install/google/protocbuff/</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # ros</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">./configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --prefix=/home/pzz/local_install/google/protocbuff/</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # pzz </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">##### 4. 编译protobuf源码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">make</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -j8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">##### 5.安装protobuf3.4.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> install</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">######################################</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#### 编译PX4时，将如下内容注释掉，编译cartographer时，将如下内容打开 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">####### add protobuf lib path ########/home/scout/local_install/lib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/home/ros/software/local_install/google/protocbuff/bin/:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$PATH</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#(动态库搜索路径) 程序加载运行期间查找动态链接库时指定除了系统默认路径之外的其他路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$LD_LIBRARY_PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:/home/ros/software/local_install/google/protocbuff/lib/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#(静态库搜索路径) 程序编译期间查找动态链接库时指定查找共享库的路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$LIBRARY_PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:/home/ros/software/local_install/google/protocbuff/lib/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#执行程序搜索路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:/home/ros/software/local_install/google/protocbuff/bin/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#c程序头文件搜索路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> C_INCLUDE_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$C_INCLUDE_PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:/home/ros/software/local_install/google/protocbuff/include/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#c++程序头文件搜索路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> CPLUS_INCLUDE_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">$CPLUS_INCLUDE_PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:/home/ros/software/local_install/google/protocbuff/include/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#pkg-config 路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> PKG_CONFIG_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/home/ros/software/local_install/google/protocbuff/lib/pkgconfig/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">######################################</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> cartographer_detailed_comments_ws/src/cartographer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 修改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">gedit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> CMakeLists.txt</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># 记得修改为自己的用户名 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">############## this is for protocol version</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">###################################################</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">INCLUDE_DIRECTORIES(/home/scout/local_install/google/protocbuff/include/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">LINK_DIRECTORIES(/home/scout/local_install/google/protocbuff/lib/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">###################################################</span></span></code></pre></div>`,110);function b(s,m,v,A,_,f){const t=p,l=k("ClientOnly");return n(),d("div",null,[C,F(l,null,{default:r(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(n(),c(t,{key:0,article:s.$frontmatter},null,8,["article"])):y("",!0)]}),_:1}),u])}const q=e(D,[["render",b]]);export{P as __pageData,q as default};
