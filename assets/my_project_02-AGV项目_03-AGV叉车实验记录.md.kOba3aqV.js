import{_ as e}from"./chunks/ArticleMetadata.Xa7L4Afm.js";import{_ as p,D as k,o as t,c as r,I as d,w as o,k as l,a as g,R as c,b as F,e as y}from"./chunks/framework.Dn7lIAzt.js";import"./chunks/md5.vgHT5zCM.js";const E=JSON.parse('{"title":"AGV叉车实验记录","description":"","frontmatter":{"title":"AGV叉车实验记录","author":"阿源","date":"2025/06/23 19:00","categories":["个人项目"],"tags":["个人项目","ROS"]},"headers":[],"relativePath":"my_project/02-AGV项目/03-AGV叉车实验记录.md","filePath":"my_project/02-AGV项目/03-AGV叉车实验记录.md","lastUpdated":1750940854000}'),u={name:"my_project/02-AGV项目/03-AGV叉车实验记录.md"},A=l("h1",{id:"agv叉车实验记录",tabindex:"-1"},[g("AGV叉车实验记录 "),l("a",{class:"header-anchor",href:"#agv叉车实验记录","aria-label":'Permalink to "AGV叉车实验记录"'},"​")],-1),D=c(`<h2 id="_1-实验说明" tabindex="-1">1. 实验说明 <a class="header-anchor" href="#_1-实验说明" aria-label="Permalink to &quot;1. 实验说明&quot;">​</a></h2><h3 id="_1-1-仿真实验准备" tabindex="-1">1.1 仿真实验准备 <a class="header-anchor" href="#_1-1-仿真实验准备" aria-label="Permalink to &quot;1.1 仿真实验准备&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ubuntu20_sfy@agv20:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ll</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /dev/fork</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lrwxrwxrwx</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">月</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  25</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /dev/forklift_apriltag_camera</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> video2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lrwxrwxrwx</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">月</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  25</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 13</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:59</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /dev/forklift_artag_camera</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> video0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lrwxrwxrwx</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 7</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">月</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  25</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:50</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /dev/forklift_controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ttyUSB0</span></span></code></pre></div><h4 id="_1-1-2-gazebo准备" tabindex="-1">1.1.2 Gazebo准备 <a class="header-anchor" href="#_1-1-2-gazebo准备" aria-label="Permalink to &quot;1.1.2 Gazebo准备&quot;">​</a></h4><h3 id="_1-2-实机实验准备" tabindex="-1">1.2 实机实验准备 <a class="header-anchor" href="#_1-2-实机实验准备" aria-label="Permalink to &quot;1.2 实机实验准备&quot;">​</a></h3><h2 id="_2-单片机实验" tabindex="-1">2. 单片机实验 <a class="header-anchor" href="#_2-单片机实验" aria-label="Permalink to &quot;2. 单片机实验&quot;">​</a></h2><h3 id="_2-1-仿真实验-单独验证stm32与ros通讯" tabindex="-1">2.1 仿真实验：单独验证STM32与ROS通讯 <a class="header-anchor" href="#_2-1-仿真实验-单独验证stm32与ros通讯" aria-label="Permalink to &quot;2.1 仿真实验：单独验证STM32与ROS通讯&quot;">​</a></h3><h4 id="_2-1-1-实验说明" tabindex="-1">2.1.1 实验说明 <a class="header-anchor" href="#_2-1-1-实验说明" aria-label="Permalink to &quot;2.1.1 实验说明&quot;">​</a></h4><ul><li>检查是否有/dev/forklift_controller</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ubuntu20_sfy@agv20:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ll</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /dev/fork</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">lrwxrwxrwx</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 7</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">月</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  25</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:50</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /dev/forklift_controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ttyUSB0</span></span></code></pre></div><ul><li>打开<code>sfy_robot.cpp</code>的注释，并重新编译</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">bool</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> turn_on_sfy_robot</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get_Sensor_Data_New</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    //Check receive_data.rx for debugging use //查看Receive_Data.rx，调试使用 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // cout &lt;&lt; &quot;================================&quot; &lt;&lt; endl;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[1] = %02x&quot;, Receive_Data.rx[1]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[2] = %02x&quot;, Receive_Data.rx[2]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[3] = %02x&quot;, Receive_Data.rx[3]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[4] = %02x&quot;, Receive_Data.rx[4]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[5] = %02x&quot;, Receive_Data.rx[5]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[6] = %02x&quot;, Receive_Data.rx[6]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[7] = %02x&quot;, Receive_Data.rx[7]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[8] = %02x&quot;, Receive_Data.rx[8]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[9] = %02x&quot;, Receive_Data.rx[9]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[10] = %02x&quot;, Receive_Data.rx[10]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[11] = %02x&quot;, Receive_Data.rx[11]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[12] = %02x&quot;, Receive_Data.rx[12]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Receive_Data.rx[13] = %02x&quot;, Receive_Data.rx[13]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // ROS_INFO(&quot;Robot_Vel.X:%f,Robot_Vel.Y:%f,Robot_Vel.Z:%f&quot;, Robot_Vel.X, Robot_Vel.Y, Robot_Vel.Z);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ul><li>启动文件</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> turn_on_sfy_robot</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test_forklift_serial.launch</span></span></code></pre></div><h4 id="_2-1-2-实验设计和结果" tabindex="-1">2.1.2 实验设计和结果 <a class="header-anchor" href="#_2-1-2-实验设计和结果" aria-label="Permalink to &quot;2.1.2 实验设计和结果&quot;">​</a></h4><ul><li>[ ] 使用cmd_vel发数，查看单片机断点，并截图Keil。图片命名：测试下发速度</li><li>[ ] 单片机给Ros发数，截图命令窗口。图片命名：测试上发速度</li><li>[ ] 查看单片机Fcode，编码器测速结果。图片命名：编码器测速</li></ul><h2 id="_3-agv-叉车初始化定位任务" tabindex="-1">3. AGV 叉车初始化定位任务 <a class="header-anchor" href="#_3-agv-叉车初始化定位任务" aria-label="Permalink to &quot;3. AGV 叉车初始化定位任务&quot;">​</a></h2><h3 id="_3-1-仿真实验-查看相机初始化定位结果-apriltag" tabindex="-1">3.1 仿真实验：查看相机初始化定位结果（Apriltag） <a class="header-anchor" href="#_3-1-仿真实验-查看相机初始化定位结果-apriltag" aria-label="Permalink to &quot;3.1 仿真实验：查看相机初始化定位结果（Apriltag）&quot;">​</a></h3><h4 id="_3-1-1-实验说明1" tabindex="-1">3.1.1 实验说明1 <a class="header-anchor" href="#_3-1-1-实验说明1" aria-label="Permalink to &quot;3.1.1 实验说明1&quot;">​</a></h4><ul><li>检查<code>test_path_plannning_gazebo.launch</code>,仿真只能使用1个相机 ，相机默认是/dev/video0</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 打开Apriltag定位功能</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">include file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;$(find sfy_ros)/launch/test_apriltag_cam.launch&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">include file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;$(find turn_on_sfy_robot)/launch/continuous_detection.launch&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 打开看托盘的相机  只能2选1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;!--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">include file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;$(find sfy_ros)/launch/test_pallet_cam.launch&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> /&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> --&gt;</span></span></code></pre></div><ul><li>修改代码<code>sfy_forklift_mission_planning.cpp</code>，确保在仿真模式下，直接跳入初始化定位任务</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">SfyForkliftMissionPlanning</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">SfyForkliftMissionPlanning</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    current_forklift_status_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AGV_STOPPED;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // current_forklift_task_type_ = FORKLIFT_NO_TASK;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    current_forklift_task_type_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> FORKLIFT_INIT_LOCATION_TASK;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ul><li>重新编译 启动文件</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sfy_ros</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test_path_plannning_gazebo.launch</span></span></code></pre></div><h4 id="_3-1-2-实验说明2" tabindex="-1">3.1.2 实验说明2 <a class="header-anchor" href="#_3-1-2-实验说明2" aria-label="Permalink to &quot;3.1.2 实验说明2&quot;">​</a></h4><h4 id="实验结果" tabindex="-1">实验结果 <a class="header-anchor" href="#实验结果" aria-label="Permalink to &quot;实验结果&quot;">​</a></h4><h4 id="测试不同遮盖程度的定位结果" tabindex="-1">测试不同遮盖程度的定位结果 <a class="header-anchor" href="#测试不同遮盖程度的定位结果" aria-label="Permalink to &quot;测试不同遮盖程度的定位结果&quot;">​</a></h4><h3 id="_3-2-实机实验-查看叉车初始化定位结果-apriltag" tabindex="-1">3.2 实机实验：查看叉车初始化定位结果（Apriltag） <a class="header-anchor" href="#_3-2-实机实验-查看叉车初始化定位结果-apriltag" aria-label="Permalink to &quot;3.2 实机实验：查看叉车初始化定位结果（Apriltag）&quot;">​</a></h3><blockquote><p>[!CAUTION]</p><p>叉车的基坐标系为base_footprint 叉车定位相机坐标系为usb_cam 请注意实验结果是否正确</p></blockquote><h4 id="实验结果-1" tabindex="-1">实验结果 <a class="header-anchor" href="#实验结果-1" aria-label="Permalink to &quot;实验结果&quot;">​</a></h4><ul><li>文件位置：</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">roslaunch sfy_ros</span></span></code></pre></div><h2 id="_4-agv叉车测试任务" tabindex="-1">4. AGV叉车测试任务 <a class="header-anchor" href="#_4-agv叉车测试任务" aria-label="Permalink to &quot;4. AGV叉车测试任务&quot;">​</a></h2><h2 id="_5-agv叉车取货任务" tabindex="-1">5. AGV叉车取货任务 <a class="header-anchor" href="#_5-agv叉车取货任务" aria-label="Permalink to &quot;5. AGV叉车取货任务&quot;">​</a></h2><h3 id="_5-1-仿真实验-验证取货路径规划结果-拓扑地图" tabindex="-1">5.1 仿真实验：验证取货路径规划结果（拓扑地图） <a class="header-anchor" href="#_5-1-仿真实验-验证取货路径规划结果-拓扑地图" aria-label="Permalink to &quot;5.1 仿真实验：验证取货路径规划结果（拓扑地图）&quot;">​</a></h3><h4 id="_5-1-1-实验说明" tabindex="-1">5.1.1 实验说明 <a class="header-anchor" href="#_5-1-1-实验说明" aria-label="Permalink to &quot;5.1.1 实验说明&quot;">​</a></h4><ul><li>设置叉车的起始位置，在<code>test_path_plannning_gazebo.launch</code></li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;!--</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  **************</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> GAZEBO Simulator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">***************</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">arg name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;x_pos&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> default=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0.5&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">arg name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;y_pos&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> default=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0.0&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">arg name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;z_pos&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> default=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0.0&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">arg name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;roll&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> default=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">arg name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;pitch&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> default=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">arg name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;yaw&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> default=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;0&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/&gt;</span></span></code></pre></div><ul><li>检查代码<code>sfy_forklift_mission_planning.cpp</code>，确保在进入取货任务后 跳进取货路径规划</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(current_forklift_task_type_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> FORKLIFT_PICKUP_TASK){</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(current_forklift_status_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AGV_STOPPED){</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">               //叉车状态  停车</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(forklift_model_choose_.click_is_next_step){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">                current_forklift_status_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> AGV_PICKUP_PATH_PLANNING;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">                // current_forklift_status_ = AGV_ARRIVED_AT_PICKUP;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">                ROS_INFO</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;取货任务开始 请点击下一步&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">            }</span></span></code></pre></div><ul><li><p>路径规划完成后，会自动卡住，当点击<code>下一步</code>时才会进行路径跟踪</p></li><li><p>本次路径规划会规划两条路径，叉车只能先正向行驶，然后倒车</p></li><li><p>叉车起始位置斜率与四个方向不能超0.4rad =</p></li><li><p>启动文件</p></li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sfy_ros</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test_path_plannning_gazebo.launch</span></span></code></pre></div><h4 id="_5-1-2-实验结果" tabindex="-1">5.1.2 实验结果 <a class="header-anchor" href="#_5-1-2-实验结果" aria-label="Permalink to &quot;5.1.2 实验结果&quot;">​</a></h4><p>叉车起始位置：（x, y, yaw），最近点（编号，方向），取货点（编号，方向）</p><ul><li>[ ] 测试案例1：叉车起始位置：（），取货点（），截图RVIZ ，图片命名：取货路径规划1</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"></span></code></pre></div><ul><li>[ ] 测试案例2：</li><li>[ ] 测试案例3：</li></ul><h3 id="_5-2-仿真实验-验证路径跟踪结果-正向和逆向" tabindex="-1">5.2 仿真实验：验证路径跟踪结果（正向和逆向） <a class="header-anchor" href="#_5-2-仿真实验-验证路径跟踪结果-正向和逆向" aria-label="Permalink to &quot;5.2 仿真实验：验证路径跟踪结果（正向和逆向）&quot;">​</a></h3><h3 id="_5-2-1-实验说明" tabindex="-1">5.2.1 实验说明 <a class="header-anchor" href="#_5-2-1-实验说明" aria-label="Permalink to &quot;5.2.1 实验说明&quot;">​</a></h3><ul><li>实验5.1成功后，点击<code>下一步</code>，会自动跳入路径跟踪</li><li>会实现两次路径跟踪，跟踪完后</li></ul><h3 id="_5-2-2-实验结果" tabindex="-1">5.2.2 实验结果 <a class="header-anchor" href="#_5-2-2-实验结果" aria-label="Permalink to &quot;5.2.2 实验结果&quot;">​</a></h3><p>叉车起始位置：（x, y, yaw），最近点（编号，方向），取货点（编号，方向）</p><ul><li>[ ] 测试案例1：叉车起始位置：（），取货点（），录屏RVIZ ，GIF命名：取货路径跟踪1</li></ul><h2 id="_5-3-仿真实验-验证托盘定位结果" tabindex="-1">5.3 仿真实验：验证托盘定位结果 <a class="header-anchor" href="#_5-3-仿真实验-验证托盘定位结果" aria-label="Permalink to &quot;5.3 仿真实验：验证托盘定位结果&quot;">​</a></h2><h4 id="_5-3-1-实验说明" tabindex="-1">5.3.1 实验说明 <a class="header-anchor" href="#_5-3-1-实验说明" aria-label="Permalink to &quot;5.3.1 实验说明&quot;">​</a></h4><h4 id="_5-3-2-实验设计" tabindex="-1">5.3.2 实验设计 <a class="header-anchor" href="#_5-3-2-实验设计" aria-label="Permalink to &quot;5.3.2 实验设计&quot;">​</a></h4><h4 id="测试不同位置距离的定位结果" tabindex="-1">测试不同位置距离的定位结果 <a class="header-anchor" href="#测试不同位置距离的定位结果" aria-label="Permalink to &quot;测试不同位置距离的定位结果&quot;">​</a></h4><p>90度相机</p><p>往前极限距离： 往左极限距离： 往右极限距离：</p><p>135度相机</p><h2 id="_6-agv叉车放货任务" tabindex="-1">6. AGV叉车放货任务 <a class="header-anchor" href="#_6-agv叉车放货任务" aria-label="Permalink to &quot;6. AGV叉车放货任务&quot;">​</a></h2><h2 id="_7-agv叉车停车任务" tabindex="-1">7. AGV叉车停车任务 <a class="header-anchor" href="#_7-agv叉车停车任务" aria-label="Permalink to &quot;7. AGV叉车停车任务&quot;">​</a></h2><h2 id="_8-其他实验" tabindex="-1">8. 其他实验 <a class="header-anchor" href="#_8-其他实验" aria-label="Permalink to &quot;8. 其他实验&quot;">​</a></h2><h3 id="_8-1-仿真实验-movebase控制算法测试-仿真实体场景" tabindex="-1">8.1 仿真实验：MoveBase控制算法测试（仿真实体场景） <a class="header-anchor" href="#_8-1-仿真实验-movebase控制算法测试-仿真实体场景" aria-label="Permalink to &quot;8.1 仿真实验：MoveBase控制算法测试（仿真实体场景）&quot;">​</a></h3><ul><li>启动文件</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sfy_ros</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test_sfy_warehouse_gazebo.launch</span></span></code></pre></div><ul><li>启动后，点击2D NAV GOAL</li><li>然后再地图上随机发布目标点就行，发布的路径为之前设定好的</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam param</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;wx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam param</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;wy&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8.7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8.7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span></code></pre></div><blockquote><p>[!WARNING]</p><p>movebase <code>只能执行一次任务</code>，任务完成后，请关闭程序</p></blockquote><blockquote><p>[!TIP]</p><p>仿真场景可选择：warehouse warehouse_2 factory empty_world</p></blockquote><h3 id="_8-2-仿真实验-movebase控制算法测试-空场景" tabindex="-1">8.2 仿真实验：MoveBase控制算法测试（空场景） <a class="header-anchor" href="#_8-2-仿真实验-movebase控制算法测试-空场景" aria-label="Permalink to &quot;8.2 仿真实验：MoveBase控制算法测试（空场景）&quot;">​</a></h3><ul><li>启动文件</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sfy_ros</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> test_sfy_empty_gazebo.launch</span></span></code></pre></div><ul><li>启动后，点击2D NAV GOAL</li><li>然后再地图上随机发布目标点就行，发布的路径为之前设定好的</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam param</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;wx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam param</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;wy&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8.7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> , </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8.7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">rosparam</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span></code></pre></div><blockquote><p>[!WARNING]</p><p>movebase <code>只能执行一次任务</code>，任务完成后，请关闭程序</p></blockquote><h3 id="_8-3-仿真实验-查看agv叉车模型和tf坐标变换" tabindex="-1">8.3 仿真实验：查看AGV叉车模型和TF坐标变换 <a class="header-anchor" href="#_8-3-仿真实验-查看agv叉车模型和tf坐标变换" aria-label="Permalink to &quot;8.3 仿真实验：查看AGV叉车模型和TF坐标变换&quot;">​</a></h3><ul><li>启动文件</li></ul><div class="language-SH vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SH</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">roslaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sfy_ros</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> rviz_sfy_forklift_model.launch</span></span></code></pre></div>`,80);function _(s,C,b,m,v,q){const h=e,n=k("ClientOnly");return t(),r("div",null,[A,d(n,null,{default:o(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(t(),F(h,{key:0,article:s.$frontmatter},null,8,["article"])):y("",!0)]}),_:1}),D])}const R=p(u,[["render",_]]);export{E as __pageData,R as default};
