import{_ as t}from"./chunks/ArticleMetadata.59a467b2.js";import{_ as c,v as l,b as r,t as y,O as i,F as p,L as A,R as C,M as D,C as B,B as F}from"./chunks/framework.5cbdba25.js";import"./chunks/md5.02486a14.js";const k=JSON.parse('{"title":"项目控制组（基于项）","description":"","frontmatter":{"title":"项目控制组（基于项）","author":"阿源","date":"2023/08/08 12:00","categories":["QT快速入门"],"tags":["C++","QT5"]},"headers":[],"relativePath":"courses/yuanzi/03-QT应用开发和部署/08-项目控制组（基于项）.md","filePath":"courses/yuanzi/03-QT应用开发和部署/08-项目控制组（基于项）.md","lastUpdated":1691327334000}'),d={name:"courses/yuanzi/03-QT应用开发和部署/08-项目控制组（基于项）.md"},E=p("h1",{id:"正点原子qt之项目控制组-基于项",tabindex:"-1"},[A("正点原子QT之项目控制组（基于项） "),p("a",{class:"header-anchor",href:"#正点原子qt之项目控制组-基于项","aria-label":'Permalink to "正点原子QT之项目控制组（基于项）"'},"​")],-1),g=C(`<h2 id="_10-项目控制组-基于项" tabindex="-1">10. 项目控制组（基于项） <a class="header-anchor" href="#_10-项目控制组-基于项" aria-label="Permalink to &quot;10. 项目控制组（基于项）&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">（1） List Widget:清单控件</span></span>
<span class="line"><span style="color:#adbac7;">（2） TreeWidget:树形控件</span></span>
<span class="line"><span style="color:#adbac7;">（3） Table Widget:表控件</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">（1） List Widget:清单控件</span></span>
<span class="line"><span style="color:#24292e;">（2） TreeWidget:树形控件</span></span>
<span class="line"><span style="color:#24292e;">（3） Table Widget:表控件</span></span></code></pre></div><h3 id="_10-1-qlistwidget-清单控件" tabindex="-1">10.1 QListWidget:清单控件 <a class="header-anchor" href="#_10-1-qlistwidget-清单控件" aria-label="Permalink to &quot;10.1 QListWidget:清单控件&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">QListWidget 继承 QListView。 QListWidget 类提供了一个基于项的列表小部件。 QListWidget 是一个便捷的类，它提供了一个类似于 QListView 提供的列表视图，但是提供了一个用于添加和删除项目的基于项目的经典接口。 QListWidget 使用内部模型来管理列表中的每个 QListWidgetItem。</span></span>
<span class="line"><span style="color:#adbac7;">QListView 是基于 model 的，需要自己来建模（例如建立 QStringListModel、 QSqlTableModel 等），保存数据，这样就大大降低了数据冗余，提高了程序的效率，但是需要我们对数据建模有一定了解，而 QListWidget 是一个升级版本的 QListView，它已经自己为我们建立了一个数据存储模型（QListWidgetItem），操作方便，直接调用 addItem 即可添加项目（ICON，文字）。</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">QListWidget 继承 QListView。 QListWidget 类提供了一个基于项的列表小部件。 QListWidget 是一个便捷的类，它提供了一个类似于 QListView 提供的列表视图，但是提供了一个用于添加和删除项目的基于项目的经典接口。 QListWidget 使用内部模型来管理列表中的每个 QListWidgetItem。</span></span>
<span class="line"><span style="color:#24292e;">QListView 是基于 model 的，需要自己来建模（例如建立 QStringListModel、 QSqlTableModel 等），保存数据，这样就大大降低了数据冗余，提高了程序的效率，但是需要我们对数据建模有一定了解，而 QListWidget 是一个升级版本的 QListView，它已经自己为我们建立了一个数据存储模型（QListWidgetItem），操作方便，直接调用 addItem 即可添加项目（ICON，文字）。</span></span></code></pre></div><h3 id="案例-添加-歌曲" tabindex="-1">案例：添加“歌曲” <a class="header-anchor" href="#案例-添加-歌曲" aria-label="Permalink to &quot;案例：添加“歌曲”&quot;">​</a></h3><p>例 45_qlistwidget，添加“歌曲”（难度：简单）。本例使用一个 QListWidget 以及一个按钮，当单击按钮时，就会调用系统打开文件窗口，过滤 mp3 后缀的文件（本例使用 touch 指令创建2 个 mp3 后缀的文件，并不是真正的歌曲，在终端输入指令为 touch 0.mp3 1.mp3，</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">#include</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;mainwindow.h&quot;</span></span>
<span class="line"><span style="color:#F47067;">#include</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;QFileDialog&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">MainWindow</span><span style="color:#ADBAC7;">(QWidget </span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;">parent)</span></span>
<span class="line"><span style="color:#ADBAC7;">    : </span><span style="color:#DCBDFB;">QMainWindow</span><span style="color:#ADBAC7;">(parent)</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#768390;">    /* 设置主窗口的显示位置与大小 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">-&gt;</span><span style="color:#DCBDFB;">setGeometry</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">800</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">480</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    listWidget </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QListWidget</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 设置listWidget的大小 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    listWidget-&gt;</span><span style="color:#DCBDFB;">setGeometry</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">480</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">480</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    listWidget-&gt;</span><span style="color:#DCBDFB;">addItem</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;请单击右边的添加项添加内容&quot;</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    pushButton </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QPushButton</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 设置pushButton的位置与大小 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    pushButton-&gt;</span><span style="color:#DCBDFB;">setGeometry</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">540</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">200</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">200</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">100</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#ADBAC7;">    pushButton-&gt;</span><span style="color:#DCBDFB;">setText</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;添加项&quot;</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 信号与槽连接 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">connect</span><span style="color:#ADBAC7;">(pushButton, </span><span style="color:#DCBDFB;">SIGNAL</span><span style="color:#ADBAC7;">(</span><span style="color:#DCBDFB;">clicked</span><span style="color:#ADBAC7;">()),</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">, </span><span style="color:#DCBDFB;">SLOT</span><span style="color:#ADBAC7;">(</span><span style="color:#DCBDFB;">pushButtonClicked</span><span style="color:#ADBAC7;">()));</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">pushButtonClicked</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#768390;">    /* 调用系统打开文件窗口，设置窗口标题为“打开文件”，过滤文件名 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    QString fileName </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">QFileDialog</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">getOpenFileName</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">                </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">,</span><span style="color:#DCBDFB;">tr</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;添加项&quot;</span><span style="color:#ADBAC7;">),</span><span style="color:#96D0FF;">&quot;&quot;</span><span style="color:#ADBAC7;">,</span></span>
<span class="line"><span style="color:#ADBAC7;">                </span><span style="color:#DCBDFB;">tr</span><span style="color:#ADBAC7;">(</span><span style="color:#96D0FF;">&quot;Files(*.mp3)&quot;</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">                );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 判断是否选中打开mp3文件 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (fileName </span><span style="color:#F47067;">!=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">NULL</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#768390;">        /* 添加项到列表中 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        listWidget-&gt;</span><span style="color:#DCBDFB;">addItem</span><span style="color:#ADBAC7;">(fileName);</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#F47067;">~</span><span style="color:#DCBDFB;">MainWindow</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;mainwindow.h&quot;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;QFileDialog&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">(QWidget </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">parent)</span></span>
<span class="line"><span style="color:#24292E;">    : </span><span style="color:#6F42C1;">QMainWindow</span><span style="color:#24292E;">(parent)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">    /* 设置主窗口的显示位置与大小 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">-&gt;</span><span style="color:#6F42C1;">setGeometry</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">800</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">480</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    listWidget </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QListWidget</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 设置listWidget的大小 */</span></span>
<span class="line"><span style="color:#24292E;">    listWidget-&gt;</span><span style="color:#6F42C1;">setGeometry</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">480</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">480</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    listWidget-&gt;</span><span style="color:#6F42C1;">addItem</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;请单击右边的添加项添加内容&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    pushButton </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QPushButton</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 设置pushButton的位置与大小 */</span></span>
<span class="line"><span style="color:#24292E;">    pushButton-&gt;</span><span style="color:#6F42C1;">setGeometry</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">540</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    pushButton-&gt;</span><span style="color:#6F42C1;">setText</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;添加项&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 信号与槽连接 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">connect</span><span style="color:#24292E;">(pushButton, </span><span style="color:#6F42C1;">SIGNAL</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">clicked</span><span style="color:#24292E;">()),</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">SLOT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">pushButtonClicked</span><span style="color:#24292E;">()));</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">pushButtonClicked</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">    /* 调用系统打开文件窗口，设置窗口标题为“打开文件”，过滤文件名 */</span></span>
<span class="line"><span style="color:#24292E;">    QString fileName </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QFileDialog</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">getOpenFileName</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">,</span><span style="color:#6F42C1;">tr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;添加项&quot;</span><span style="color:#24292E;">),</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">tr</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Files(*.mp3)&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">                );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 判断是否选中打开mp3文件 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (fileName </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">        /* 添加项到列表中 */</span></span>
<span class="line"><span style="color:#24292E;">        listWidget-&gt;</span><span style="color:#6F42C1;">addItem</span><span style="color:#24292E;">(fileName);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#D73A49;">~</span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_10-2-qtreewidget-树形控件" tabindex="-1">10.2 QTreeWidget:树形控件 <a class="header-anchor" href="#_10-2-qtreewidget-树形控件" aria-label="Permalink to &quot;10.2 QTreeWidget:树形控件&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">QTreeWidget 继承 QTreeView。 QTreeWidget 类提供了一个使用预定义树模型的树视图。QTreeWidget 类是一个便捷的类，它提供了一个标准的树小部件，具有一个类似于 qt3 中的 QListView 类所使用的基于项目的经典接口。该类基于 Qt 的模型/视图体系结构，并使用默认模型来保存项，每个项都是 QTreeWidgetItem。</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">QTreeWidget 继承 QTreeView。 QTreeWidget 类提供了一个使用预定义树模型的树视图。QTreeWidget 类是一个便捷的类，它提供了一个标准的树小部件，具有一个类似于 qt3 中的 QListView 类所使用的基于项目的经典接口。该类基于 Qt 的模型/视图体系结构，并使用默认模型来保存项，每个项都是 QTreeWidgetItem。</span></span></code></pre></div><h3 id="案例-群发信息" tabindex="-1">案例：群发信息 <a class="header-anchor" href="#案例-群发信息" aria-label="Permalink to &quot;案例：群发信息&quot;">​</a></h3><p>例 46_qtreewidget，群发信息（难度：一般），本例使用一个 TreeWidget，模拟成一个飞信联系人分组，通过选中组内联系人来“群发”信息。实际并不是真正做一个群发信息的飞信，只是模拟飞信群发信息时选择联系人的场景，通过例子来熟悉 QTreeWidget 的使用。</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">#include</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;mainwindow.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">MainWindow</span><span style="color:#ADBAC7;">(QWidget </span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;">parent)</span></span>
<span class="line"><span style="color:#ADBAC7;">    : </span><span style="color:#DCBDFB;">QMainWindow</span><span style="color:#ADBAC7;">(parent)</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#768390;">    /* 设置主窗体大小 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">-&gt;</span><span style="color:#DCBDFB;">setGeometry</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">800</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">480</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 实例化 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    treeWidget </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QTreeWidget</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 居中 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">setCentralWidget</span><span style="color:#ADBAC7;">(treeWidget);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 清空列表 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    treeWidget-&gt;</span><span style="color:#DCBDFB;">clear</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 实例化顶层树节点 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    parentItem </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QTreeWidgetItem</span><span style="color:#ADBAC7;">(treeWidget);</span></span>
<span class="line"><span style="color:#ADBAC7;">    parentItem-&gt;</span><span style="color:#DCBDFB;">setText</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#96D0FF;">&quot;同事&quot;</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    parentItem-&gt;</span><span style="color:#DCBDFB;">setFlags</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">                </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::ItemIsUserCheckable</span></span>
<span class="line"><span style="color:#ADBAC7;">                </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::ItemIsEnabled</span></span>
<span class="line"><span style="color:#ADBAC7;">                </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::ItemIsSelectable</span></span>
<span class="line"><span style="color:#ADBAC7;">                );</span></span>
<span class="line"><span style="color:#768390;">    /* 树节点设置为未选中 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    parentItem-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Unchecked);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 字符串链表 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    QList </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">QString</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> strList;</span></span>
<span class="line"><span style="color:#ADBAC7;">    strList</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;关羽&quot;</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;刘备&quot;</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;张飞&quot;</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">for</span><span style="color:#ADBAC7;"> (</span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> i </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">; i </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">3</span><span style="color:#ADBAC7;">; i</span><span style="color:#F47067;">++</span><span style="color:#ADBAC7;">){</span></span>
<span class="line"><span style="color:#768390;">        /* 实例化子节点 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        subItem[i] </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QTreeWidgetItem</span><span style="color:#ADBAC7;">(parentItem);</span></span>
<span class="line"><span style="color:#768390;">        /* 设置子节点的文本，参数0代表第0列 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        subItem[i]-&gt;</span><span style="color:#DCBDFB;">setText</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, strList[i]);</span></span>
<span class="line"><span style="color:#768390;">        /* 设置子节点的属性为用户可选、项开启、项可选 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        subItem[i]-&gt;</span><span style="color:#DCBDFB;">setFlags</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">                    </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::ItemIsUserCheckable</span></span>
<span class="line"><span style="color:#ADBAC7;">                    </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::ItemIsEnabled</span></span>
<span class="line"><span style="color:#ADBAC7;">                    </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::ItemIsSelectable</span></span>
<span class="line"><span style="color:#ADBAC7;">                    );</span></span>
<span class="line"><span style="color:#768390;">        /* 设置子节点的状态为未选中 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        subItem[i]-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">,</span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Unchecked);</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#768390;">    /* 信号槽连接 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">connect</span><span style="color:#ADBAC7;">(treeWidget,</span><span style="color:#DCBDFB;">SIGNAL</span><span style="color:#ADBAC7;">(</span><span style="color:#DCBDFB;">itemChanged</span><span style="color:#ADBAC7;">(QTreeWidgetItem</span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;"> , </span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;">)),</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">, </span><span style="color:#DCBDFB;">SLOT</span><span style="color:#ADBAC7;">(</span><span style="color:#DCBDFB;">treeItemChanged</span><span style="color:#ADBAC7;">(QTreeWidgetItem</span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;"> , </span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">/* 更新树节点函数 */</span></span>
<span class="line"><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">updateParentItem</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">QTreeWidgetItem</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">*</span><span style="color:#F69D50;">item</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#768390;">    /* 获取子节点的父节点（树节点） */</span></span>
<span class="line"><span style="color:#ADBAC7;">    QTreeWidgetItem</span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;"> parent </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> item-&gt;</span><span style="color:#DCBDFB;">parent</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;">(parent </span><span style="color:#F47067;">==</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">NULL</span><span style="color:#ADBAC7;">){</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">return</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#768390;">    /* 初始化选中的数目为0，下面根据selectCount来判断树节点的状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> selectCount </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"><span style="color:#768390;">    /* 获取树节点的子节点总数 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> childCount </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> parent-&gt;</span><span style="color:#DCBDFB;">childCount</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"><span style="color:#768390;">    /* 循环判断子节点的状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">for</span><span style="color:#ADBAC7;">(</span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> i </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">; i </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> childCount; i </span><span style="color:#F47067;">++</span><span style="color:#ADBAC7;">){</span></span>
<span class="line"><span style="color:#ADBAC7;">        QTreeWidgetItem</span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;"> childItem </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;">parent-&gt;</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">(i);</span></span>
<span class="line"><span style="color:#768390;">        /* 判断当前子节点的状是否为选中状态，如果是，则加一 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;">(childItem-&gt;</span><span style="color:#DCBDFB;">checkState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">) </span><span style="color:#F47067;">==</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Checked) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            selectCount </span><span style="color:#F47067;">++</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#768390;">    /* 根据selectCount来判断树节点的状态 */</span></span>
<span class="line"><span style="color:#768390;">    /* 当选中的子节点小于或等于0时，则为设置树节点为未选中状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (selectCount </span><span style="color:#F47067;">&lt;=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#768390;">        /* 设置树节点为未选中状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        parent-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Unchecked);</span></span>
<span class="line"><span style="color:#768390;">        /* 部分选中时，树节点为半选状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    } </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (selectCount </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&amp;&amp;</span><span style="color:#ADBAC7;"> selectCount </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> childCount) {</span></span>
<span class="line"><span style="color:#768390;">        /* 设置为半选状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        parent-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::PartiallyChecked);</span></span>
<span class="line"><span style="color:#768390;">        /* 子节点全选时 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    } </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (selectCount </span><span style="color:#F47067;">==</span><span style="color:#ADBAC7;"> childCount){</span></span>
<span class="line"><span style="color:#768390;">        /* 设置为树节点为选中状态 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        parent-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Checked);</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F47067;">void</span><span style="color:#ADBAC7;"> </span><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">treeItemChanged</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">QTreeWidgetItem</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">*</span><span style="color:#F69D50;">item</span><span style="color:#ADBAC7;">, </span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;">)</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#768390;">    /* 获取子节点总数 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> count </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> item-&gt;</span><span style="color:#DCBDFB;">childCount</span><span style="color:#ADBAC7;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 若顶层树节点选中 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Checked </span><span style="color:#F47067;">==</span><span style="color:#ADBAC7;"> item-&gt;</span><span style="color:#DCBDFB;">checkState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">) ) {</span></span>
<span class="line"><span style="color:#768390;">        /* 若选中的项是树节点，count会大于0，否则选中的项是子节点 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (count </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">for</span><span style="color:#ADBAC7;"> (</span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> i </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">; i </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> count; i</span><span style="color:#F47067;">++</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#768390;">                /* 子节点全选 */</span></span>
<span class="line"><span style="color:#ADBAC7;">                item-&gt;</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">(i)-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Checked);</span></span>
<span class="line"><span style="color:#ADBAC7;">            }</span></span>
<span class="line"><span style="color:#ADBAC7;">        } </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#768390;">            /* 子节点处理 */</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#DCBDFB;">updateParentItem</span><span style="color:#ADBAC7;">(item);</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#768390;">        /* 若顶层树节点取消选中时 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    } </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (</span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Unchecked </span><span style="color:#F47067;">==</span><span style="color:#ADBAC7;"> item-&gt;</span><span style="color:#DCBDFB;">checkState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">)) {</span></span>
<span class="line"><span style="color:#ADBAC7;">        </span><span style="color:#F47067;">if</span><span style="color:#ADBAC7;"> (count </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">){</span></span>
<span class="line"><span style="color:#768390;">            /* 若选中的项是树节点，count会大于0，否则选中的项是子节点 */</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#F47067;">for</span><span style="color:#ADBAC7;"> (</span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> i </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">; i </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> count; i</span><span style="color:#F47067;">++</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#768390;">                /* 子节点全不选 */</span></span>
<span class="line"><span style="color:#ADBAC7;">                item-&gt;</span><span style="color:#DCBDFB;">child</span><span style="color:#ADBAC7;">(i)-&gt;</span><span style="color:#DCBDFB;">setCheckState</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::Unchecked);</span></span>
<span class="line"><span style="color:#ADBAC7;">            }</span></span>
<span class="line"><span style="color:#ADBAC7;">        } </span><span style="color:#F47067;">else</span><span style="color:#ADBAC7;"> {</span></span>
<span class="line"><span style="color:#768390;">            /* 子节点处理 */</span></span>
<span class="line"><span style="color:#ADBAC7;">            </span><span style="color:#DCBDFB;">updateParentItem</span><span style="color:#ADBAC7;">(item);</span></span>
<span class="line"><span style="color:#ADBAC7;">        }</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#F47067;">~</span><span style="color:#DCBDFB;">MainWindow</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;mainwindow.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">(QWidget </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">parent)</span></span>
<span class="line"><span style="color:#24292E;">    : </span><span style="color:#6F42C1;">QMainWindow</span><span style="color:#24292E;">(parent)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">    /* 设置主窗体大小 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">-&gt;</span><span style="color:#6F42C1;">setGeometry</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">800</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">480</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 实例化 */</span></span>
<span class="line"><span style="color:#24292E;">    treeWidget </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QTreeWidget</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 居中 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setCentralWidget</span><span style="color:#24292E;">(treeWidget);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 清空列表 */</span></span>
<span class="line"><span style="color:#24292E;">    treeWidget-&gt;</span><span style="color:#6F42C1;">clear</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 实例化顶层树节点 */</span></span>
<span class="line"><span style="color:#24292E;">    parentItem </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QTreeWidgetItem</span><span style="color:#24292E;">(treeWidget);</span></span>
<span class="line"><span style="color:#24292E;">    parentItem-&gt;</span><span style="color:#6F42C1;">setText</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;同事&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    parentItem-&gt;</span><span style="color:#6F42C1;">setFlags</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::ItemIsUserCheckable</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::ItemIsEnabled</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::ItemIsSelectable</span></span>
<span class="line"><span style="color:#24292E;">                );</span></span>
<span class="line"><span style="color:#6A737D;">    /* 树节点设置为未选中 */</span></span>
<span class="line"><span style="color:#24292E;">    parentItem-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Unchecked);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 字符串链表 */</span></span>
<span class="line"><span style="color:#24292E;">    QList </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">QString</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> strList;</span></span>
<span class="line"><span style="color:#24292E;">    strList</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;关羽&quot;</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;刘备&quot;</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;张飞&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#6A737D;">        /* 实例化子节点 */</span></span>
<span class="line"><span style="color:#24292E;">        subItem[i] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QTreeWidgetItem</span><span style="color:#24292E;">(parentItem);</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置子节点的文本，参数0代表第0列 */</span></span>
<span class="line"><span style="color:#24292E;">        subItem[i]-&gt;</span><span style="color:#6F42C1;">setText</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, strList[i]);</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置子节点的属性为用户可选、项开启、项可选 */</span></span>
<span class="line"><span style="color:#24292E;">        subItem[i]-&gt;</span><span style="color:#6F42C1;">setFlags</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::ItemIsUserCheckable</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::ItemIsEnabled</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::ItemIsSelectable</span></span>
<span class="line"><span style="color:#24292E;">                    );</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置子节点的状态为未选中 */</span></span>
<span class="line"><span style="color:#24292E;">        subItem[i]-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Unchecked);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#6A737D;">    /* 信号槽连接 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">connect</span><span style="color:#24292E;">(treeWidget,</span><span style="color:#6F42C1;">SIGNAL</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">itemChanged</span><span style="color:#24292E;">(QTreeWidgetItem</span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> , </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">)),</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">SLOT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">treeItemChanged</span><span style="color:#24292E;">(QTreeWidgetItem</span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> , </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/* 更新树节点函数 */</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">updateParentItem</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">QTreeWidgetItem</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">item</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">    /* 获取子节点的父节点（树节点） */</span></span>
<span class="line"><span style="color:#24292E;">    QTreeWidgetItem</span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> parent </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> item-&gt;</span><span style="color:#6F42C1;">parent</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(parent </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">NULL</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#6A737D;">    /* 初始化选中的数目为0，下面根据selectCount来判断树节点的状态 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> selectCount </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">    /* 获取树节点的子节点总数 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> childCount </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> parent-&gt;</span><span style="color:#6F42C1;">childCount</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">    /* 循环判断子节点的状态 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> childCount; i </span><span style="color:#D73A49;">++</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        QTreeWidgetItem</span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> childItem </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">parent-&gt;</span><span style="color:#6F42C1;">child</span><span style="color:#24292E;">(i);</span></span>
<span class="line"><span style="color:#6A737D;">        /* 判断当前子节点的状是否为选中状态，如果是，则加一 */</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(childItem-&gt;</span><span style="color:#6F42C1;">checkState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Checked) {</span></span>
<span class="line"><span style="color:#24292E;">            selectCount </span><span style="color:#D73A49;">++</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#6A737D;">    /* 根据selectCount来判断树节点的状态 */</span></span>
<span class="line"><span style="color:#6A737D;">    /* 当选中的子节点小于或等于0时，则为设置树节点为未选中状态 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (selectCount </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置树节点为未选中状态 */</span></span>
<span class="line"><span style="color:#24292E;">        parent-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Unchecked);</span></span>
<span class="line"><span style="color:#6A737D;">        /* 部分选中时，树节点为半选状态 */</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (selectCount </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> selectCount </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> childCount) {</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置为半选状态 */</span></span>
<span class="line"><span style="color:#24292E;">        parent-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::PartiallyChecked);</span></span>
<span class="line"><span style="color:#6A737D;">        /* 子节点全选时 */</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (selectCount </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> childCount){</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置为树节点为选中状态 */</span></span>
<span class="line"><span style="color:#24292E;">        parent-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Checked);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">treeItemChanged</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">QTreeWidgetItem</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">    /* 获取子节点总数 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> count </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> item-&gt;</span><span style="color:#6F42C1;">childCount</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 若顶层树节点选中 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Checked </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> item-&gt;</span><span style="color:#6F42C1;">checkState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) ) {</span></span>
<span class="line"><span style="color:#6A737D;">        /* 若选中的项是树节点，count会大于0，否则选中的项是子节点 */</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (count </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> count; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">                /* 子节点全选 */</span></span>
<span class="line"><span style="color:#24292E;">                item-&gt;</span><span style="color:#6F42C1;">child</span><span style="color:#24292E;">(i)-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Checked);</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#6A737D;">            /* 子节点处理 */</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">updateParentItem</span><span style="color:#24292E;">(item);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#6A737D;">        /* 若顶层树节点取消选中时 */</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Unchecked </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> item-&gt;</span><span style="color:#6F42C1;">checkState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (count </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#6A737D;">            /* 若选中的项是树节点，count会大于0，否则选中的项是子节点 */</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> count; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">                /* 子节点全不选 */</span></span>
<span class="line"><span style="color:#24292E;">                item-&gt;</span><span style="color:#6F42C1;">child</span><span style="color:#24292E;">(i)-&gt;</span><span style="color:#6F42C1;">setCheckState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::Unchecked);</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#6A737D;">            /* 子节点处理 */</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">updateParentItem</span><span style="color:#24292E;">(item);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#D73A49;">~</span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_10-3-qtablewidget-表控件" tabindex="-1">10.3 QTableWidget:表控件 <a class="header-anchor" href="#_10-3-qtablewidget-表控件" aria-label="Permalink to &quot;10.3 QTableWidget:表控件&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#adbac7;">QTableWidget 继承 QTableView。QTableWidget 类提供了一个带有默认模型的基于项的表视图。表小部件为应用程序提供标准的表显示工具。 QTableWidget 中的项由 QTableWidgetItem 提供。</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">QTableWidget 继承 QTableView。QTableWidget 类提供了一个带有默认模型的基于项的表视图。表小部件为应用程序提供标准的表显示工具。 QTableWidget 中的项由 QTableWidgetItem 提供。</span></span></code></pre></div><h3 id="案例-abelwidget-表格" tabindex="-1">案例：abelWidget 表格 <a class="header-anchor" href="#案例-abelwidget-表格" aria-label="Permalink to &quot;案例：abelWidget 表格&quot;">​</a></h3><p>例 47_qtablewidget， TabelWidget 表格（难度：简单），本例使用一个 TableWidget，绘制一个表格，同时修改项的标题，在表格里可以直接通过双击进行编辑项里的内容，也可以删除项里的内容等。</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark-dimmed vp-code-dark"><code><span class="line"><span style="color:#F47067;">#include</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;mainwindow.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#DCBDFB;">MainWindow</span><span style="color:#ADBAC7;">(QWidget </span><span style="color:#F47067;">*</span><span style="color:#ADBAC7;">parent)</span></span>
<span class="line"><span style="color:#ADBAC7;">    : </span><span style="color:#DCBDFB;">QMainWindow</span><span style="color:#ADBAC7;">(parent)</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#768390;">    /* 设置主窗体的大小与位置 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">-&gt;</span><span style="color:#DCBDFB;">setGeometry</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">800</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">480</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 实例化 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QTableWidget</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">this</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#768390;">    /* 设置tableWidget表居中 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#DCBDFB;">setCentralWidget</span><span style="color:#ADBAC7;">(tableWidget);</span></span>
<span class="line"><span style="color:#768390;">    /* 设置列数 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setColumnCount</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#768390;">    /* 设置行数 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setRowCount</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;">);</span></span>
<span class="line"><span style="color:#768390;">    /* 使用标签设置水平标题标签 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setHorizontalHeaderLabels</span><span style="color:#ADBAC7;">(</span></span>
<span class="line"><span style="color:#ADBAC7;">                </span><span style="color:#DCBDFB;">QStringList</span><span style="color:#ADBAC7;">()</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;姓名&quot;</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;性别&quot;</span></span>
<span class="line"><span style="color:#ADBAC7;">                );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390;">    /* 字符串类型链表 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    QList </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;">QString</span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;"> strList;</span></span>
<span class="line"><span style="color:#ADBAC7;">    strList</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;小明&quot;</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;小红&quot;</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;男&quot;</span><span style="color:#F47067;">&lt;&lt;</span><span style="color:#96D0FF;">&quot;女&quot;</span><span style="color:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">    </span><span style="color:#F47067;">for</span><span style="color:#ADBAC7;"> (</span><span style="color:#F47067;">int</span><span style="color:#ADBAC7;"> i </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">; i </span><span style="color:#F47067;">&lt;</span><span style="color:#ADBAC7;"> </span><span style="color:#6CB6FF;">4</span><span style="color:#ADBAC7;">; i</span><span style="color:#F47067;">++</span><span style="color:#ADBAC7;">) {</span></span>
<span class="line"><span style="color:#768390;">        /* 实例化 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        tableWidgetItem[i] </span><span style="color:#F47067;">=</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">new</span><span style="color:#ADBAC7;"> </span><span style="color:#DCBDFB;">QTableWidgetItem</span><span style="color:#ADBAC7;">(strList[i]);</span></span>
<span class="line"><span style="color:#768390;">        /* 设置文本居中对齐 */</span></span>
<span class="line"><span style="color:#ADBAC7;">        tableWidgetItem[i]-&gt;</span><span style="color:#DCBDFB;">setTextAlignment</span><span style="color:#ADBAC7;">(</span><span style="color:#F69D50;">Qt</span><span style="color:#ADBAC7;">::AlignCenter);</span></span>
<span class="line"><span style="color:#ADBAC7;">    }</span></span>
<span class="line"><span style="color:#768390;">    /* 插入数据，表的index就是一个二维数组数据 */</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setItem</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, tableWidgetItem[</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">]);</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setItem</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, tableWidgetItem[</span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">]);</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setItem</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">0</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">, tableWidgetItem[</span><span style="color:#6CB6FF;">2</span><span style="color:#ADBAC7;">]);</span></span>
<span class="line"><span style="color:#ADBAC7;">    tableWidget-&gt;</span><span style="color:#DCBDFB;">setItem</span><span style="color:#ADBAC7;">(</span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">, </span><span style="color:#6CB6FF;">1</span><span style="color:#ADBAC7;">, tableWidgetItem[</span><span style="color:#6CB6FF;">3</span><span style="color:#ADBAC7;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F69D50;">MainWindow</span><span style="color:#ADBAC7;">::</span><span style="color:#F47067;">~</span><span style="color:#DCBDFB;">MainWindow</span><span style="color:#ADBAC7;">()</span></span>
<span class="line"><span style="color:#ADBAC7;">{</span></span>
<span class="line"><span style="color:#ADBAC7;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;mainwindow.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">(QWidget </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">parent)</span></span>
<span class="line"><span style="color:#24292E;">    : </span><span style="color:#6F42C1;">QMainWindow</span><span style="color:#24292E;">(parent)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">    /* 设置主窗体的大小与位置 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">-&gt;</span><span style="color:#6F42C1;">setGeometry</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">800</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">480</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 实例化 */</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QTableWidget</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">    /* 设置tableWidget表居中 */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setCentralWidget</span><span style="color:#24292E;">(tableWidget);</span></span>
<span class="line"><span style="color:#6A737D;">    /* 设置列数 */</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setColumnCount</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">    /* 设置行数 */</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setRowCount</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">    /* 使用标签设置水平标题标签 */</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setHorizontalHeaderLabels</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">QStringList</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;姓名&quot;</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;性别&quot;</span></span>
<span class="line"><span style="color:#24292E;">                );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /* 字符串类型链表 */</span></span>
<span class="line"><span style="color:#24292E;">    QList </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">QString</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> strList;</span></span>
<span class="line"><span style="color:#24292E;">    strList</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;小明&quot;</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;小红&quot;</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;男&quot;</span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">&quot;女&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">        /* 实例化 */</span></span>
<span class="line"><span style="color:#24292E;">        tableWidgetItem[i] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">QTableWidgetItem</span><span style="color:#24292E;">(strList[i]);</span></span>
<span class="line"><span style="color:#6A737D;">        /* 设置文本居中对齐 */</span></span>
<span class="line"><span style="color:#24292E;">        tableWidgetItem[i]-&gt;</span><span style="color:#6F42C1;">setTextAlignment</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">Qt</span><span style="color:#24292E;">::AlignCenter);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#6A737D;">    /* 插入数据，表的index就是一个二维数组数据 */</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setItem</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, tableWidgetItem[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">]);</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setItem</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, tableWidgetItem[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">]);</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setItem</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, tableWidgetItem[</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">]);</span></span>
<span class="line"><span style="color:#24292E;">    tableWidget-&gt;</span><span style="color:#6F42C1;">setItem</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, tableWidgetItem[</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">::</span><span style="color:#D73A49;">~</span><span style="color:#6F42C1;">MainWindow</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,17);function u(s,h,m,W,Q,b){const o=t,e=D("ClientOnly");return l(),r("div",null,[E,y(e,null,{default:i(()=>{var n,a;return[(((n=s.$frontmatter)==null?void 0:n.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(l(),B(o,{key:0,article:s.$frontmatter},null,8,["article"])):F("",!0)]}),_:1}),g])}const T=c(d,[["render",u]]);export{k as __pageData,T as default};
